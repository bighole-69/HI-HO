# streamlit_app.py
import streamlit as st

st.set_page_config(page_title="MBTI 북·무비 추천", page_icon="📚🎬", layout="centered")

st.title("📚🎬 MBTI별 책·영화 추천")
st.write("한 줄 이유와 함께 책 2권, 영화 2편을 추천해줄게요. 청소년에게 친근한 말투로 준비했어요 😊")

MBTI_LIST = [
    "ISTJ","ISFJ","INFJ","INTJ",
    "ISTP","ISFP","INFP","INTP",
    "ESTP","ESFP","ENFP","ENTP",
    "ESTJ","ESFJ","ENFJ","ENTJ"
]

# 추천 데이터: 각 MBTI마다 books: [(title, author), ...], movies: [(title, year)], reasons: list of 4 strings
RECOMMENDATIONS = {
    "ISTJ": {
        "books":[("성공하는 사람들의 7가지 습관","스티븐 R. 코비"),("데일 카네기의 인간관계론","데일 카네기")],
        "movies":[("쇼생크 탈출","1994"),("인셉션","2010")],
        "reasons":[
            "체계적이라 실용적인 자기계발서가 잘 맞아. 💼",
            "관계에 쓰기 좋은 고전적 조언들이 많아. 🤝",
            "계획과 문제 해결을 좋아하니까 몰입하기 좋아. 🧭",
            "복잡한 퍼즐 같은 이야기 구조를 즐길 거야. 🧩"
        ]
    },
    "ISFJ": {
        "books":[("미움받을 용기","기시미 이치로·고가 후미타케"),("어린 왕자","생텍쥐페리")],
        "movies":[("월-E","2008"),("코코","2017")],
        "reasons":[
            "따뜻한 인간관계에 힘이 되는 책이야. 🌱",
            "순수하고 공감 가는 이야기라 편안해. 🌟",
            "감성적인 이야기로 마음이 잘 풀릴 거야. 🤖",
            "가족과 기억을 다루는 감동이 있어. 🎺"
        ]
    },
    "INFJ": {
        "books":[("데미안","헤르만 헤세"),("나는 나로 살기로 했다","김수현")],
        "movies":[("이터널 선샤인","2004"),("라라랜드","2016")],
        "reasons":[
            "내면을 탐구하는 문학이 잘 맞아. 🌙",
            "자아 찾기에 공감되는 실용적 조언. ✨",
            "감성·철학적 메시지가 깊게 남아. 💭",
            "꿈과 현실의 감성이 예쁘게 어우러져 있어. 🎶"
        ]
    },
    "INTJ": {
        "books":[("사피엔스","유발 하라리"),("총, 균, 쇠","재레드 다이아몬드")],
        "movies":[("인터스텔라","2014"),("매드 맥스: 분노의 도로","2015")],
        "reasons":[
            "넓은 관점에서 사고하기 좋은 책들. 📘",
            "역사·시스템을 이해하는 데 도움돼. 🌐",
            "복잡한 설정과 논리를 즐길 수 있어. 🚀",
            "전략적이고 강렬한 서사가 매력적이야. ⚔️"
        ]
    },
    "ISTP": {
        "books":[("연금술사","파울로 코엘료"),("나미야 잡화점의 기적","히가시노 게이고")],
        "movies":[("본 아이덴티티","2002"),("매드 맥스: 분노의 도로","2015")],
        "reasons":[
            "간결하면서도 의미 있는 모험담을 좋아할 거야. 🧭",
            "미스터리한 퍼즐이 흥미롭고 빠르게 읽혀. 🔎",
            "액션과 현실적 문제 해결이 잘 어울려. 🏎️",
            "속도감 있고 강렬한 스토리로 몰입감 최고. 💥"
        ]
    },
    "ISFP": {
        "books":[("연금술사","파울로 코엘료"),("아무도 알려주지 않은 것들","—")],
        "movies":[("어바웃 타임","2013"),("코코","2017")],
        "reasons":[
            "감성적이고 여행 같은 이야기로 힐링돼. 🌄",
            "작은 것들에서 의미를 찾는 스타일에 좋아. ✨",
            "사랑과 일상의 따뜻함을 느낄 수 있어. ⏳",
            "가족과 기억을 아름답게 그려줘서 편안해. 🎸"
        ]
    },
    "INFP": {
        "books":[("연금술사","파울로 코엘료"),("나미야 잡화점의 기적","히가시노 게이고")],
        "movies":[("이터널 선샤인","2004"),("어바웃 타임","2013")],
        "reasons":[
            "꿈꾸는 여행자 같은 이야기라 마음에 들어. ✨",
            "따뜻하고 희망적인 플롯이 잘 맞아. 📖",
            "감정의 깊이를 섬세하게 다뤄줘. 💔→❤️",
            "사소한 순간의 의미를 잘 보여줘서 감성적. ⏰"
        ]
    },
    "INTP": {
        "books":[("코스모스","칼 세이건"),("사피엔스","유발 하라리")],
        "movies":[("도니 다코","2001"),("인터스텔라","2014")],
        "reasons":[
            "지적 호기심을 자극하는 과학·사고서가 좋아. 🔭",
            "거대한 관점에서 질문을 던지는 책. 🌍",
            "낯설고 철학적인 이야기를 즐길 수 있어. 🌀",
            "우주·시간 같은 큰 주제가 흥미로워. ✨"
        ]
    },
    "ESTP": {
        "books":[("나는 오늘도 경제적 자유를 꿈꾼다","—"),("앵그리 어댑터","—")],
        "movies":[("어벤져스","2012"),("닥터 스트레인지","2016")],
        "reasons":[
            "실용적이고 즉효성 있는 팁을 좋아할 거야. ⚡",
            "도전정신·삶의 기술 같은 내용이 맞아. 🛠️",
            "액션과 스릴을 바로 즐기기 좋아하니까. 💥",
            "시각적 쾌감과 속도감이 매력적이야. 🌀"
        ]
    },
    "ESFP": {
        "books":[("그릿(Grit)","앤절라 더크워스"),("어린 왕자","생텍쥐페리")],
        "movies":[("라라랜드","2016"),("코코","2017")],
        "reasons":[
            "열정과 실전 감각을 북돋아 줄 거야. 🔥",
            "순수하고 감성적인 이야기가 잘 맞아. 🌈",
            "음악·무대 같은 화려한 즐거움이 가득해. 🎤",
            "감정과 색감이 풍부해서 기분 좋게 봐. 🎉"
        ]
    },
    "ENFP": {
        "books":[("미움받을 용기","기시미 이치로·고가 후미타케"),("연금술사","파울로 코엘료")],
        "movies":[("이터널 선샤인","2004"),("라라랜드","2016")],
        "reasons":[
            "자유로운 생각과 용기를 주는 책들이야. 🌟",
            "꿈과 가능성을 이야기하는 모험담이 좋아. 🗺️",
            "감정의 파고를 깊게 끌어당겨 공감돼. 💞",
            "창의적이고 활기찬 분위기가 잘 맞아. ✨"
        ]
    },
    "ENTP": {
        "books":[("사피엔스","유발 하라리"),("이기는 습관","—")],
        "movies":[("인셉션","2010"),("아이언맨","2008")],
        "reasons":[
            "넓은 주제를 빠르게 훑어보며 아이디어 얻기 좋아. ⚡",
            "도전과 전략을 담은 실용서로 자극받아. 🧠",
            "아이디어와 반전이 많은 영화가 취향저격. 🌀",
            "캐릭터의 기지와 유머가 재밌어. 🤖"
        ]
    },
    "ESTJ": {
        "books":[("성공하는 사람들의 7가지 습관","스티븐 R. 코비"),("리더의 조건","—")],
        "movies":[("쇼생크 탈출","1994"),("킹스맨","2014")],
        "reasons":[
            "실무적이고 검증된 원칙을 좋아하니까. 📋",
            "리더십과 조직을 다루는 내용이 딱이야. 🏢",
            "질서와 목표 달성 이야기에 몰입하기 좋아. 🔒",
            "조직적인 임무와 활약이 잘 어울려. 🎯"
        ]
    },
    "ESFJ": {
        "books":[("미움받을 용기","기시미 이치로·고가 후미타케"),("어린 왕자","생텍쥐페리")],
        "movies":[("코코","2017"),("인사이드 아웃","2015")],
        "reasons":[
            "관계와 마음 다루는 책이 도움이 돼. 🤝",
            "따뜻한 메시지로 안정감을 줘. 🌼",
            "가족·감정 이야기에 공감 잘 될 거야. 🎺",
            "감정의 작동 원리를 귀엽게 보여줘서 좋음. 🧠"
        ]
    },
    "ENFJ": {
        "books":[("미움받을 용기","기시미 이치로·고가 후미타케"),("사피엔스","유발 하라리")],
        "movies":[("라라랜드","2016"),("기생충","2019")],
        "reasons":[
            "사람을 이해하고 이끄는 데 도움되는 책들이야. 🌟",
            "사회 전반을 보는 시야를 넓혀줘. 🔍",
            "영감 주는 이야기와 감성이 잘 어울려. 🎶",
            "사회적 메시지와 인간관계 묘사가 강렬해. 🕵️"
        ]
    },
    "ENTJ": {
        "books":[("성공하는 사람들의 7가지 습관","스티븐 R. 코비"),("사피엔스","유발 하라리")],
        "movies":[("인터스텔라","2014"),("인셉션","2010")],
        "reasons":[
            "전략과 실행을 좋아하는 타입에 적합해. 🧭",
            "거시적 안목으로 판단하는 데 도움돼. 📈",
            "장대한 목표와 리더십 서사를 즐길 수 있어. 🚀",
            "복잡한 플롯을 분석하며 즐기기 좋아. 🧠"
        ]
    }
}

# UI
st.markdown("**자기 MBTI를 골라봐 — 그러면 추천을 보여줄게!**")
mbti = st.selectbox("MBTI 선택", MBTI_LIST)

if st.button("추천 보기"):
    rec = RECOMMENDATIONS.get(mbti)
    if not rec:
        st.error("추천이 준비되지 않았어요.")
    else:
        st.subheader(f"추천 — {mbti}님을 위한 책·영화")
        # Books
        st.markdown("### 📚 책 (문고에서 쉽게 구할 만한 대중서 중심)")
        books = rec["books"]
        reasons = rec["reasons"]
        for i, (title, author) in enumerate(books):
            st.markdown(f"**{i+1}. {title}** — *{author}*")
            st.write(f"• {reasons[i]}")
        # Movies
        st.markdown("### 🎬 영화 (한 번이라도 상영되었거나 널리 알려진 작품)")
        movies = rec["movies"]
        for j, (mtitle, myear) in enumerate(movies, start=len(books)):
            st.markdown(f"**{j-len(books)+1}. {mtitle}** ({myear})")
            st.write(f"• {reasons[j]}")
        st.markdown("---")
        st.info("추천은 편하게 참고용이야 — 마음에 드는 걸 골라서 읽고 즐겨봐! 😄")

st.caption("만들어진 앱 — 필요하면 추천 목록(책/영화)을 바꾸거나 설명 톤을 더 캐주얼하게 바꿔줄게.")
